services:
  salsify_integration.content_type_field_check:
    class: Drupal\salsify_integration\EventSubscriber\SalsifySubscriber
    arguments: ['@queue']
    tags:
      - { name: 'event_subscriber' }

  salsify_integration.config_entity_type_update:
    class: Drupal\salsify_integration\EventSubscriber\SalsifyConfigEntityTypeSubscriber
    arguments: ['@module_handler', '@entity_type.manager']
    tags:
      - { name: 'event_subscriber' }

  salsify_integration.salsify_product_repository:
    class: Drupal\salsify_integration\SalsifyProductRepository
    arguments: ['@entity_type.manager']

  salsify_integration.product_data_helper:
    class: Drupal\salsify_integration\ProductHelper

  salsify_integration.email_report:
    class: Drupal\salsify_integration\SalsifyEmailReport
    arguments:
      - '@config.factory'
      - '@entity_type.manager'
      - '@plugin.manager.mail'
      - '@language_manager'
      - '@tempstore.shared'
      - '@logger.factory'

  salsify_integration.product_fields_mapper:
    class: Drupal\salsify_integration\ProductFieldsMapper

  salsify_integration.salsify_core:
    class: Drupal\salsify_integration\Salsify
    arguments:
      - '@logger.factory'
      - '@config.factory'
      - '@entity_type.manager'
      - '@entity_field.manager'
      - '@cache.default'
      - '@queue'
      - '@module_handler'
      - '@salsify_integration.mulesof_connector'
      - '@http_client'

  salsify_integration.salsify_fields:
    class: Drupal\salsify_integration\SalsifyFields
    arguments:
      - '@logger.factory'
      - '@config.factory'
      - '@entity_type.manager'
      - '@entity_field.manager'
      - '@cache.default'
      - '@queue'
      - '@module_handler'
      - '@salsify_integration.mulesof_connector'
      - '@http_client'
      - '@salsify_integration.salsify_product_repository'
      - '@plugin.manager.mail'
      - '@language_manager'
      - '@salsify_integration.product_data_helper'
      - '@salsify_integration.email_report'
      - '@salsify_integration.product_fields_mapper'
      - '@salsify_integration.salsify_import_field'
      - '@salsify_integration.salsify_import_taxonomy'
      - '@messenger'

  salsify_integration.salsify_import_field:
    class: Drupal\salsify_integration\SalsifyImportField
    arguments:
      - '@config.factory'
      - '@entity_type.manager'
      - '@cache.default'
      - '@salsify_integration.salsify_core'
      - '@module_handler'
      - '@salsify_integration.salsify_product_repository'
      - '@salsify_integration.product_data_helper'
      - '@salsify_integration.salsify_import_media'
      - '@salsify_integration.salsify_import_taxonomy'

  salsify_integration.salsify_import_taxonomy:
    class: Drupal\salsify_integration\SalsifyImportTaxonomyTerm
    arguments:
      - '@config.factory'
      - '@entity_type.manager'
      - '@cache.default'
      - '@salsify_integration.salsify_core'
      - '@module_handler'

  salsify_integration.salsify_import_media:
    class: Drupal\salsify_integration\SalsifyImportMedia
    arguments:
      - '@config.factory'
      - '@entity_type.manager'
      - '@cache.default'
      - '@salsify_integration.salsify_core'
      - '@module_handler'
      - '@token'
      - '@file_system'

  salsify_integration.mulesof_connector:
    class: Drupal\salsify_integration\MulesoftConnector
    arguments:
      - '@salsify_integration.product_data_helper'

  salsify_integration.salsify.runs:
    class: Drupal\salsify_integration\Run\RunResource
    arguments:
      - '@http_client'
      - '@config.factory'
      - '@logger.factory'
      - '@language_manager'

  salsify_integration.migrations.products:
    class: Drupal\salsify_integration\MigrationRunner
    arguments:
      - '@plugin.manager.migration'
      - '@config.factory'
