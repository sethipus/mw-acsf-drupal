id: bens_uk_node_product_variant
label: Product variants
migration_group: bens_uk
migration_tags:
  - Node
migration_dependencies:
  optional:
    - bens_uk_product_key_image
    - bens_uk_product_image_1
    - bens_uk_product_image_2
    - bens_uk_product_image_3
    - bens_uk_product_image_4
source:
  plugin: brand_drupal_salsify_url
  data_fetcher_plugin: http
  data_parser_plugin: salsify_json
  item_selector: /
  track_changes: true
  constants:
    destination: 'public://migrate-images/products'
  fields:
    -
      name: source_allergen_warnings
      label: ' Allergen Statement'
      selector: 'field_product_allergen_warnings/0'
    -
      name: source_key_image
      label: 'CMS: Image 1'
      selector: 'field_product_key_image/0'
    -
      name: source_product_image_1
      label: 'CMS: Image 2'
      selector: 'field_product_image_1/0'
    -
      name: source_product_image_2
      label: 'CMS: Image 3'
      selector: 'field_product_image_2/0'
    -
      name: source_product_image_3
      label: 'CMS: Image 4'
      selector: 'field_product_image_3/0'
    -
      name: source_product_image_4
      label: 'CMS: Image 5'
      selector: 'field_product_image_4/0'
    -
      name: source_name
      label: 'CMS: Product name'
      selector: 'field_product_name/0'
    -
      name: source_ingredients
      label: 'Complete Ingredient Statement'
      selector: 'field_product_ingredients/0'
    -
      name: source_sku
      label: 'GTIN'
      selector: 'field_product_sku/0'
    -
      name: source_cooking_instructions
      label: 'Brandbank Cooking Guidelines'
      selector: 'field_product_cooking_instruct/0'
    -
      name: source_size
      label: 'Net Content'
      selector: 'field_product_size/0'
    -
      name: source_description
      label: 'Description'
      selector: 'field_product_description/0'
    -
      name: source_consumption_context
      label: 'Consumption Context'
      selector: 'field_product_consumption_1/0'
    -
      name: source_consumption_context_2
      label: 'Consumption Context Dual Label'
      selector: 'field_product_consumption_2/0'
    -
      name: source_carb
      label: 'LTD Carbohydrate/100g'
      selector: 'field_product_carb/0'
    -
      name: source_carb_2
      label: 'LTD Carbohydrate Serving/kcal'
      selector: 'field_dual_carb/0'
    -
      name: source_calories
      label: 'LTD Energy'
      selector: 'field_product_calories/0'
    -
      name: source_calories_2
      label: 'LTD Energy Serving'
      selector: 'field_dual_calories/0'
    -
      name: source_fat
      label: 'LTD Fat'
      selector: 'field_product_total_fat/0'
    -
      name: source_fat_2
      label: 'LTD Fat Serving'
      selector: 'field_dual_total_fat/0'
    -
      name: source_fiber
      label: 'LTD Fibre'
      selector: 'field_product_fibre/0'
    -
      name: source_fiber_2
      label: 'LTD Fibre Serving'
      selector: 'field_dual_fibre/0'
    -
      name: source_saturated_fat
      label: 'LTD of_which_saturates'
      selector: 'field_product_saturated_fat/0'
    -
      name: source_saturated_fat_2
      label: 'LTD of_which_saturates Serving'
      selector: 'field_dual_saturated_fat/0'
    -
      name: source_total_sugars
      label: 'LTD of_which_sugars'
      selector: 'field_product_total_sugars/0'
    -
      name: source_total_sugars_2
      label: 'LTD of_which_sugars Serving'
      selector: 'field_dual_total_sugars/0'
    -
      name: field_product_protein
      label: 'LTD Protein'
      selector: 'field_product_protein/0'
    -
      name: field_product_protein_2
      label: 'LTD Protein Serving'
      selector: 'field_dual_protein/0'
    -
      name: source_sodium
      label: 'LTD Salt'
      selector: 'field_product_sodium/0'
    -
      name: source_sodium_2
      label: 'LTD Salt Serving'
      selector: 'field_dual_sodium/0'
    -
      name: source_benefits
      label: 'Benefits'
      selector: 'field_nutritional_claims_benefit_1/0'
    -
      name: source_benefits_2
      label: 'Benefits 2'
      selector: 'field_nutritional_claims_benefit_2/0'
    -
      name: source_benefits_3
      label: 'Benefits 3'
      selector: 'field_nutritional_claims_benefit_3/0'
    -
      name: source_benefits_4
      label: 'Benefits 4'
      selector: 'field_nutritional_claims_benefit_4/0'
    -
      name: source_benefits_5
      label: 'Benefits 5'
      selector: 'field_nutritional_claims_benefit_5/0'
    -
      name: source_benefits_6
      label: 'Benefits 6'
      selector: 'field_nutritional_claims_benefit_6/0'
    -
      name: source_benefits_7
      label: 'Benefits 7'
      selector: 'field_nutritional_claims_benefit_7/0'
    -
      name: source_benefits_8
      label: 'Benefits 8'
      selector: 'field_nutritional_claims_benefit_8/0'
    -
      name: source_benefits_9
      label: 'Benefits 9'
      selector: 'field_nutritional_claims_benefit_9/0'
    -
      name: source_benefits_10
      label: 'Benefits 10'
      selector: 'field_nutritional_claims_benefit_10/0'
    -
      name: source_serving_size
      label: ' Serving Size'
      selector: 'field_product_serving_size/0'
    -
      name: source_reference_intake
      label: 'LTD Reference Intake'
      selector: 'field_product_reference_intake/0'
    -
      name: source_product_disclaimers
      label: 'Product Disclaimers'
      selector: 'field_product_disclaimers/0'

  ids:
    source_sku:
      type: string
process:
  title:
    plugin: skip_on_empty
    method: row
    source: source_name
  field_product_sku:
    plugin: skip_on_empty
    method: row
    source: source_sku
  field_product_size:
    plugin: skip_on_empty
    method: row
    source: source_size
  'field_product_description/value':
    plugin: skip_on_empty
    method: row
    source: source_description
  field_product_cooking_instruct/value: source_cooking_instructions
  'field_product_description/format':
    plugin: default_value
    default_value: rich_text
  field_product_calories:
    plugin: default_value
    default_value: ''
    source: source_calories
  field_dual_calories:
    plugin: default_value
    default_value: ''
    source: source_calories_2
  field_product_total_fat:
    plugin: default_value
    default_value: ''
    source: source_fat
  field_dual_total_fat:
    plugin: default_value
    default_value: ''
    source: source_fat_2
  field_product_fibre:
    plugin: default_value
    default_value: ''
    source: source_fiber
  field_dual_fibre:
    plugin: default_value
    default_value: ''
    source: source_fiber_2
  field_product_saturated_fat:
    plugin: default_value
    default_value: ''
    source: source_saturated_fat
  field_dual_saturated_fat:
    plugin: default_value
    default_value: ''
    source: source_saturated_fat_2
  field_product_total_sugars:
    plugin: default_value
    default_value: ''
    source: source_total_sugars
  field_dual_total_sugars:
    plugin: default_value
    default_value: ''
    source: source_total_sugars_2
  field_product_protein:
    plugin: default_value
    default_value: ''
    source: field_product_protein
  field_dual_protein:
    plugin: default_value
    default_value: ''
    source: field_product_protein_2
  field_product_carb:
    plugin: default_value
    default_value: ''
    source: source_carb
  field_product_sodium:
    plugin: default_value
    default_value: ''
    source: source_sodium
  field_dual_sodium:
    plugin: default_value
    default_value: ''
    source: source_sodium_2
  field_product_consumption_1:
    plugin: default_value
    default_value: ''
    source: source_consumption_context
  field_product_consumption_2:
    plugin: default_value
    default_value: ''
    source: source_consumption_context_2
  field_product_serving_size:
    plugin: default_value
    default_value: ''
    source: source_serving_size
  field_product_reference_intake:
    plugin: default_value
    default_value: ''
    source: source_reference_intake
  field_product_key_image/target_id:
    plugin: migration_lookup
    migration:
      - bens_uk_product_key_image
    source: source_key_image
    no_stub: true
  field_product_image_1/target_id:
    plugin: migration_lookup
    migration:
      - bens_uk_product_image_1
    source: source_product_image_1
    no_stub: true
  field_product_image_2/target_id:
    plugin: migration_lookup
    migration:
      - bens_uk_product_image_2
    source: source_product_image_2
    no_stub: true
  field_product_image_3/target_id:
    plugin: migration_lookup
    migration:
      - bens_uk_product_image_3
    source: source_product_image_3
    no_stub: true
  field_product_image_4/target_id:
    plugin: migration_lookup
    migration:
      - bens_uk_product_image_4
    source: source_product_image_4
    no_stub: true
  'field_product_allergen_warnings/value': source_allergen_warnings
  'field_product_allergen_warnings/format':
    plugin: default_value
    default_value: rich_text
  'field_product_ingredients/value': source_ingredients
  'field_product_ingredients/format':
    plugin: default_value
    default_value: rich_text
  'field_product_disclaimers/value': source_product_disclaimers
  'field_product_disclaimers/format':
    plugin: default_value
    default_value: rich_text
  field_nutritional_claims_benefit:
    plugin: multiple_values
    source:
      - source_benefits
      - source_benefits_2
      - source_benefits_3
      - source_benefits_4
      - source_benefits_5
      - source_benefits_6
      - source_benefits_7
      - source_benefits_8
      - source_benefits_9
      - source_benefits_10

  type:
    plugin: default_value
    default_value: product_variant
  uid:
    plugin: default_value
    default_value: 1
  langcode:
    plugin: salsify_i18n_process_language
    source: language
    default_value: 'und'
  status:
    plugin: default_value
    default_value: 0
  moderation_state:
    plugin: static_map
    source: '@status'
    default_value: draft
    map:
      '0': draft
      '1': published
destination:
  plugin: entity:node
