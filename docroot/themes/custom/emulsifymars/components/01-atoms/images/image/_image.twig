{% set image_base_class = image_base_class|default('image') %}
{% set image_extra_classes = '' %}

{% if image_array %}
  {% set image_srcset = '' %}
  {% set image_sizes = '' %}
  {% for breakpoint, image in image_array %}
    {% set image_srcset = image_srcset ~ image ~ ' ' ~ breakpoint ~ 'w' ~ ',' %}
    {% if loop.first %}
      {% set image_sizes = image_sizes ~ '(min-width: ' ~ (breakpoint + 1) ~ 'px) ' ~ breakpoint ~ 'px, ' %}
    {% endif %}
    {% set image_sizes = image_sizes ~ '(max-width: ' ~ breakpoint ~ 'px) ' ~ breakpoint ~ 'px, ' %}
    {% if loop.last %}
      {% set image_sizes = image_sizes ~ breakpoint ~ 'px' %}
    {% endif %}
  {% endfor %}
{% endif %}

<img loading="lazy" data-object-fit
  {{ bem(image_base_class, image_modifiers, image_blockname, image_extra_classes) }}
  {% if image_srcset %}
    {% if image_extra_classes == 'lazyload' %}
      data-srcset="{{ image_srcset }}"
    {% else %}
      srcset="{{ image_srcset }}"
    {% endif %}
  {% endif %}
  {% if height %}
    height="{{ height }}"
  {% endif %}
  {% if width %}
    width="{{ width }}"
  {% endif %}
  {% if image_extra_classes == 'lazyload' %}
    data-src="{{ image_src }}"
  {% else %}
    src="{{ image_src }}"
  {% endif %}
  {% if image_alt %}
    alt="{{ image_alt }}"
  {% else %}
    alt=""
  {% endif %}
  {% if image_title %}
    title="{{ image_title }}"
  {% endif %}
/>
