{% set freeform_story_base_class = freeform_story_base_class|default('freeform-story') %}
{% set freeform_story_modifiers = [freeform_story_align | default('left') ] %}
{% set freeform_story_header_2_base_class = freeform_story_header_2_base_class|default('freeform-story__heading') %}
{% set freeform_story_header_1_base_class = freeform_story_header_1_base_class|default('freeform-story__subheading') %}
{% set freeform_story_paragraph_base_class = freeform_story_paragraph_base_class|default('freeform-story__paragraph') %}

<section {{ bem(freeform_story_base_class, freeform_story_modifiers) }}
  {% if use_custom_color %}
    style="background-color:{{ '#' ~ custom_background_color }}"
  {% endif %}
  data-theme="{{ theme_styles }}">
  {% if brand_shape %}
    <div class="freeform-story__brand-shape">
      {{ brand_shape | raw }}
    </div>
  {% endif %}

  <div class="freeform-story__content">
    {% if freeform_story_img_src %}
      <div class="freeform-story__content--column">
        <div class="freeform-story__img">
          {% set images = {
            1440: freeform_story_img_src|resize(705, 415),
            768: freeform_story_img_src|resize(374, 209),
            375: freeform_story_img_src|resize(326, 192),
          } %}
          <div {{ bem('aspect-ratio-wrapper', ['16-9']) }}>
            {% include "@atoms/images/image/responsive-image.twig" with {
              output_image_tag: true,
              image_alt: freeform_story_img_alt,
              image_src: freeform_story_img_src|resize(580, 580),
              image_array: images,
            } %}
          </div>
        </div>
      </div>
    {% else %}
      <div class="freeform-story__placeholder"></div>
    {% endif %}

    <div class="freeform-story__content--column">
      <div class="freeform-story__texts">
        {% if freeform_story_header_1 %}
          {% include "@atoms/text/headings/_heading.twig" with {
            heading: freeform_story_header_1,
            heading_level: freeform_story_header_1_level,
            heading_base_class: freeform_story_header_1_base_class,
            text_color_override: text_color_override
          } %}
        {% endif %}

        {% include "@atoms/text/headings/_heading.twig" with {
          heading: freeform_story_header_2,
          heading_level: freeform_story_header_2_level,
          heading_base_class: freeform_story_header_2_base_class,
          text_color_override: text_color_override
        } %}

        {% include "@atoms/text/text/07-element.twig" with {
          paragraph_content: freeform_story_paragraph_content,
          paragraph_base_class: freeform_story_paragraph_base_class,
          text_color_override: text_color_override
        } %}
      </div>
    </div>
  </div>
</section>
