{% set pp_header_base_class = pp_header_base_class|default('parent-page-header') %}

{# TODO: for now this is hardcoded, backend change will be required later #}
{% set tint_enabled = tint_enabled|default(false) %}

{% if parent_page_media_url and parent_page_media_type == 'image' %}
  {% set pp_header_modifiers = ['with-bg-media', 'with-min-height'] %}
  {% if tint_enabled %}
    {% set pp_header_modifiers = pp_header_modifiers|merge(['tint-enabled']) %}
  {% endif %}
{% elseif parent_page_media_url and parent_page_media_type == 'video' %}
  {% set pp_header_modifiers = ['with-bg-video'] %}
{% else %}
  {% set pp_header_modifiers = ['with-min-height'] %}
{% endif %}

<section
  {{ bem(pp_header_base_class, pp_header_modifiers, pp_header_extra_classes) }}
  data-theme="{{ theme_styles }}"
  {% if pp_header_heading and parent_page_media_type == 'video' %}
    data-component-title="{{ pp_header_heading }}"
  {% endif %}
  {% if parent_page_media_url and parent_page_media_type == 'image' %}
    style="background-image: url('{{ parent_page_media_url }}');"
  {% endif %}
>
  <div class="content">
    {% if pp_header_heading %}
      {% set eyebrow_base_class = eyebrow_base_class|default('eyebrow') %}
      <h3 {{ bem(eyebrow_base_class, pp_header_eyebrow_modifiers) }} style="color:{{ text_color }}">
        {{ pp_header_eyebrow_text }}
      </h3>

      {% set heading_base_class = pp_header_heading_base_class|default('h' ~ pp_header_heading_level) %}
      <h{{ pp_header_heading_level }} {{ bem(heading_base_class) }} style="color:{{ text_color }}">
        {{ pp_header_heading }}
      </h{{ pp_header_heading_level }}>

      {% include "@atoms/separators/horizontal-img/horizontal-img.twig" %}

      {% set paragraph_base_class = pp_header_paragraph_base_class|default('paragraph') %}
      <p {{ bem(paragraph_base_class) }} style="color:{{ text_color }}">
        {{ pp_header_paragraph_content | raw }}
      </p>
    {% endif %}
  </div>
  
  {% if parent_page_media_url and parent_page_media_type == 'video' %}
    {{ attach_library('emulsifymars/ambient-video') }}
    <div class="bg-video">
      {% include "@atoms/video/ambient-video/video.twig" with {
        video__src__url: parent_page_media_url,
        video__control: true,
        data_layer: data_layer,
      } %}
    </div>
  {% endif %}

  <div class="brand-shape">
    {{ brand_shape | raw }}
  </div>
</section>
