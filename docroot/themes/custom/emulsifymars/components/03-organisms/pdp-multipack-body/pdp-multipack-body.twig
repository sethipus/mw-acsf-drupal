{% set pdp_template__base_class = 'pdp-body' %}
{% if pdp_common_data.nutrition_data.dual_label %}{% set dual_label = true %}{% endif %}

{% for pdp_item in pdp_data %}
  <section {{ bem(pdp_template__base_class) }} data-theme="{{ theme_styles }}" data-pdp-size-active={{pdp_item.active}} data-pdp-size-id={{pdp_item.size_id}}>
    <!-- PDP Hero Module -->
    {% include "@molecules/pdp/pdp-hero/pdp-hero.twig" with {
      gtin: pdp_item.gtin,
      size_id: pdp_item.size_id,
      pdp_common_hero_data: pdp_common_data.hero_data,
      pdp_size_items_data: pdp_size_data,
      pdp_hero_data: pdp_item.hero_data,
      pdp_label_nutrition: (pdp_common_data.nutrition_data.show_nutrition_data) ? pdp_common_data.nutrition_data.nutritional_label : FALSE,
      pdp_label_allergen: '',
      pdp_label_cooking: pdp_item.cooking_data is not empty ? pdp_common_data.cooking_data.cooking_label : '',
      pdp_label_more_information: pdp_common_data.more_information_data.show_more_information_label ? pdp_common_data.more_information_data.more_information_label : '',
      wtb_manual_link_info: pdp_item.wtb_manual_link_info,
      price_spider_link_info: pdp_item.price_spider_link_info,
      mik_mak_link_info: pdp_item.mik_mak_link_info
    } %}
    {% for pdp_product in pdp_item.products %}
      <!-- PDP Multipack Product Header -->
      {% set last_product = loop.last ? true : false %}
      {% include "@molecules/pdp/pdp-multipack-details/pdp-multipack-details.twig" with {
        size_id: pdp_item.size_id,
        product_title: pdp_product.product_title,
        product_image: pdp_product.product_image,
        pdp_nutrition_data: pdp_product.nutrition_data.serving_item_empty? NULL : pdp_product.nutrition_data,
        claims_benefits: pdp_product.nutrition_data.claims_benefits,
        dual_nutrition_data: pdp_product.dual_nutrition_data,
        pdp_common_nutrition_data: pdp_common_data.nutrition_data,
        pdp_allergen_data: pdp_product.allergen_data,
        pdp_common_allergen_data: pdp_common_data.allergen_data,
        dual_label: dual_label,
        last_product: last_product
      } %}
    {% endfor %}

    <!-- PDP Cooking -->
    {% include "@molecules/pdp/pdp-cooking/pdp-cooking.twig" with {
      size_id: pdp_item.size_id,
      pdp_cooking_data: pdp_item.cooking_data,
      pdp_common_cooking_data: pdp_common_data.cooking_data,
    } %}
  </section>
{% endfor %}
<!-- PDP More Information -->
{% include "@molecules/pdp/pdp-more-information/pdp-more-information.twig" with {
  pdp_more_information_data: pdp_item.more_information_data,
  pdp_common_more_information_data: pdp_common_data.more_information_data,
} %}
