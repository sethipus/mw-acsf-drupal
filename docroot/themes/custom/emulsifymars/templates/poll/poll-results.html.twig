{#
/**
 * @file
 * Default theme implementation to display the poll results in a block.
 *
 * Variables available:
 * - title: The title of the poll.
 * - results: The results of the poll.
 * - votes: The total results in the poll.
 * - links: Links in the poll.
 * - pid: The pid of the poll
 * - cancel_form: A form to cancel the user's vote, if allowed.
 * - raw_links: The raw array of links.
 * - vote: The choice number of the current user's vote.
 *
 * @see template_preprocess_poll_results()
 *
 * @ingroup themeable
 */
#}


{#{% set results_final = [] %}#}
{#{% set poll_options = poll.getOptions() %}#}
{#{% for key, value in poll_options %}#}
{#  {% set results_final = results_final|merge({ (' ' ~ key): results[loop.index0]}) %}#}
{#{% endfor %}#}

{% set results_final = [] %}
{% set poll_options = poll.getOptions() %}
{% for key, value in poll_options %}
  {% set results_final = results_final|merge([
    results[loop.index0]|merge({
      key: (key)
    })
  ]) %}
{% endfor %}

{% include "@molecules/polls/poll-submitted.twig" with {
  theme_styles: 'twix',
  polling_heading: question,
  polling_paragraph_content: poll.field_description.value,
  results: results_final,
  my_vote: vote,
  polling_submitted_text: poll.field_thank_you_message.value
} %}


{#<div class="poll">#}
{#  {% if show_question %}#}
{#    <h3 class="poll-question">{{ question }}</h3>#}
{#  {% else %}#}
{#    <h3 class="poll-results-title">{{ results_title }}</h3>#}
{#  {% endif %}#}
{#  <dl>#}
{#    {{ results }}#}
{#  </dl>#}
{#  <div class="total">#}
{#    {% trans %}Total votes: {{ votes }}{% endtrans %}#}
{#  </div>#}
{#</div>#}
