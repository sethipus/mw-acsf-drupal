{#
/**
 * @file
 * Template for the product card component.
 */
#}

{% set main_variant = node | mainVariant %}
{% set main_media = main_variant | entityMainMediaId | mediaParamsById %}
{% set product_card_media = main_variant | productCardMedia | mediaParamsById %}

{% set has_card_media = product_card_media.error is not defined or not product_card_media.error %}

{% if has_card_media %}
  {% set background_image =  product_card_media.src %}
  {% set hover_image =  main_media.src %}
{% else %}
  {% set background_image =  main_media.src %}
  {% set hover_image = null %}
{% endif %}

{% include "@molecules/card/product-card/product-card.twig" with {
  theme_styles: 'drupal',
  card__eyebrow: elements['#eyebrow'],
  paragraph_size: 'large',
  paragraph_base_class: 'paragraph',
  paragraph_modifiers: ['large'],
  default_link_content: 'SEE DETAILS',
  default_link_base_class: 'default-link',
  link_content: 'BUY NOW',
  is_new: node.field_product_new.value,
  link_base_class: 'text_link',
  item: {
    card_url: url,
    card__image__src: background_image,
    card__image__hover__src: hover_image,
    paragraph_content: node.title.value,
    default_link_attributes: {
      href: url
    },
    link_url: ''
  }
} %}
