{#
/**
 * @file
 * Template for the product card component.
 */
#}

{% set image_product_key_src = node.field_product_variants.entity.field_product_key_image_override.entity.image.entity.fileuri %}
{% if image_product_key_src == NULL %}
  {% set image_product_key_src = node.field_product_variants.entity.field_product_key_image.entity.image.entity.fileuri %}
{% endif %}

{% set image_product_key_src = file_url(image_product_key_src) %}
{% set image_override_src = node.field_product_variants.entity.field_product_card_imageoverride.entity.image.entity.fileuri %}
{% if image_override_src %}
  {% set image_override_src = file_url(image_override_src) %}
{% else %}
  {% set image_override_src = image_product_key_src %}
  {% set image_product_key_src = null %}
{% endif %}

{% set card_image_src = image_override_src ? image_override_src : image_product_key_src %}
{% set card_image_override_src = image_override_src ? image_product_key_src : null %}

{% include "@molecules/card/product-card/product-card.twig" with {
  theme_styles: 'drupal',
  card__eyebrow: elements['#eyebrow'],
  paragraph_size: 'large',
  paragraph_base_class: 'paragraph',
  paragraph_modifiers: ['large'],
  default_link_content: 'SEE DETAILS',
  default_link_base_class: 'default-link',
  link_content: 'BUY NOW',
  link_base_class: 'text_link',
  item: {
    card_url: url,
    card__image__src: card_image_src,
    card__image__override__src: card_image_override_src,
    paragraph_content: node.title.value,
    default_link_attributes: {
      href: url
    },
    link_url: ''
  }
} %}
